{"ast":null,"code":"var _jsxFileName = \"/Users/haoyan/reactpro/\\u9879\\u76EE/jira\\u9879\\u76EE/fake-jira-main/src/pages/projectBoard/components/KanbanColumn.tsx\",\n    _s2 = $RefreshSig$();\n\n/*\n * @Descripttion: 看板列表\n * @Author: huangjitao\n * @Date: 2021-07-17 16:09:05\n * @Function: 该文件用途描述\n */\nimport React from \"react\";\nimport { useKanbansQueryKey, useTaskModal, useTasksSearchParams } from \"pages/projectBoard/utils\";\nimport { TaskTypeIcon } from \"./TaskTypeIcon\";\nimport styled from \"@emotion/styled\";\nimport { Button, Card, Dropdown, Menu, Modal } from \"antd\";\nimport { useTasks } from \"api/Task\";\nimport { CreateTask } from \"pages/projectBoard/components/CreateTask\";\nimport { Row } from \"components\";\nimport { useDeleteKanban } from \"api/Kanban\";\nimport { Mark } from \"./Mark\";\nimport { Drag, Drop, DropChild } from \"components/DragAndDrop\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const KanbanColumn = /*#__PURE__*/React.forwardRef(_c = _s2(({\n  kanban,\n  ...props\n}, ref) => {\n  var _s = $RefreshSig$();\n\n  _s2();\n\n  const {\n    data: allTasks\n  } = useTasks(useTasksSearchParams());\n  const tasks = allTasks === null || allTasks === void 0 ? void 0 : allTasks.filter(task => task.kanbanId === kanban.id);\n  const {\n    startEdit\n  } = useTaskModal();\n  const {\n    name: keyword\n  } = useTasksSearchParams();\n\n  const More = ({\n    kanban\n  }) => {\n    _s();\n\n    const {\n      mutateAsync\n    } = useDeleteKanban(useKanbansQueryKey());\n\n    const onDelete = () => {\n      Modal.confirm({\n        okText: \"确定\",\n        cancelText: \"取消\",\n        title: \"确定删除看板吗\",\n\n        onOk() {\n          return mutateAsync({\n            id: kanban.id\n          });\n        }\n\n      });\n    };\n\n    const overlay = /*#__PURE__*/_jsxDEV(Menu, {\n      children: /*#__PURE__*/_jsxDEV(Menu.Item, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          type: \"link\",\n          onClick: onDelete,\n          children: \"\\u5220\\u9664\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this);\n\n    return /*#__PURE__*/_jsxDEV(Dropdown, {\n      overlay: overlay,\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        type: \"link\",\n        children: \"...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this);\n  };\n\n  _s(More, \"+hTezQHkVH2uLYVYYdQIAiqy/+M=\", false, function () {\n    return [useDeleteKanban, useKanbansQueryKey];\n  });\n\n  return /*#__PURE__*/_jsxDEV(Container, { ...props,\n    ref: ref,\n    children: [/*#__PURE__*/_jsxDEV(Row, {\n      justifyContent: \"space-between\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: kanban.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(More, {\n        kanban: kanban\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TasksContainer, {\n      children: [/*#__PURE__*/_jsxDEV(Drop, {\n        droppableId: String(kanban.id),\n        type: \"ROW\",\n        direction: \"vertical\",\n        children: /*#__PURE__*/_jsxDEV(DropChild, {\n          style: {\n            minHeight: \"1rem\"\n          },\n          children: tasks === null || tasks === void 0 ? void 0 : tasks.map((task, taskIndex) => /*#__PURE__*/_jsxDEV(Drag, {\n            draggableId: \"task\" + task.id,\n            index: taskIndex,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(Card, {\n                style: {\n                  marginBottom: \"0.5rem\",\n                  cursor: \"pointer\"\n                },\n                onClick: () => {\n                  startEdit(task.id);\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  children: /*#__PURE__*/_jsxDEV(Mark, {\n                    name: task.name,\n                    keyword: keyword\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 87,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 86,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(TaskTypeIcon, {\n                  id: task.typeId\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 89,\n                  columnNumber: 21\n                }, this)]\n              }, task.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 79,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 17\n            }, this)\n          }, task.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CreateTask, {\n        kanbanId: kanban.id\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 5\n  }, this);\n}, \"VOiMMKYw7xAuhE2UIoeeChwDiL4=\", false, function () {\n  return [useTasks, useTasksSearchParams, useTaskModal, useTasksSearchParams];\n}));\n_c2 = KanbanColumn;\nexport const Container = styled.div`\n  min-width: 27rem;\n  border-radius: 6px;\n  background-color: rgb(244, 245, 247);\n  display: flex;\n  flex-direction: column;\n  padding: 0.7rem 0.7rem 1rem;\n  margin-right: 1.5rem;\n`;\n_c3 = Container;\nconst TasksContainer = styled.div`\n  overflow: scroll;\n  flex: 1;\n\n  ::-webkit-scrollbar {\n    display: none;\n  }\n`;\n_c4 = TasksContainer;\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"KanbanColumn$React.forwardRef\");\n$RefreshReg$(_c2, \"KanbanColumn\");\n$RefreshReg$(_c3, \"Container\");\n$RefreshReg$(_c4, \"TasksContainer\");","map":{"version":3,"sources":["/Users/haoyan/reactpro/项目/jira项目/fake-jira-main/src/pages/projectBoard/components/KanbanColumn.tsx"],"names":["React","useKanbansQueryKey","useTaskModal","useTasksSearchParams","TaskTypeIcon","styled","Button","Card","Dropdown","Menu","Modal","useTasks","CreateTask","Row","useDeleteKanban","Mark","Drag","Drop","DropChild","KanbanColumn","forwardRef","kanban","props","ref","data","allTasks","tasks","filter","task","kanbanId","id","startEdit","name","keyword","More","mutateAsync","onDelete","confirm","okText","cancelText","title","onOk","overlay","String","minHeight","map","taskIndex","marginBottom","cursor","typeId","Container","div","TasksContainer"],"mappings":"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","sourcesContent":["/*\n * @Descripttion: 看板列表\n * @Author: huangjitao\n * @Date: 2021-07-17 16:09:05\n * @Function: 该文件用途描述\n */\n\nimport React from \"react\";\nimport { Kanban } from \"types/Kanban\";\nimport {\n  useKanbansQueryKey,\n  useTaskModal,\n  useTasksSearchParams,\n} from \"pages/projectBoard/utils\";\nimport { TaskTypeIcon } from \"./TaskTypeIcon\";\nimport styled from \"@emotion/styled\";\nimport { Button, Card, Dropdown, Menu, Modal } from \"antd\";\nimport { useTasks } from \"api/Task\";\nimport { CreateTask } from \"pages/projectBoard/components/CreateTask\";\nimport { Row } from \"components\";\nimport { useDeleteKanban } from \"api/Kanban\";\nimport { Mark } from \"./Mark\";\nimport { Drag, Drop, DropChild } from \"components/DragAndDrop\";\n\nexport const KanbanColumn = React.forwardRef<\n  HTMLDivElement,\n  { kanban: Kanban }\n>(({ kanban, ...props }, ref) => {\n  const { data: allTasks } = useTasks(useTasksSearchParams());\n  const tasks = allTasks?.filter((task) => task.kanbanId === kanban.id);\n  const { startEdit } = useTaskModal();\n  const { name: keyword } = useTasksSearchParams();\n\n  const More = ({ kanban }: { kanban: Kanban }) => {\n    const { mutateAsync } = useDeleteKanban(useKanbansQueryKey());\n    const onDelete = () => {\n      Modal.confirm({\n        okText: \"确定\",\n        cancelText: \"取消\",\n        title: \"确定删除看板吗\",\n        onOk() {\n          return mutateAsync({ id: kanban.id });\n        },\n      });\n    };\n    const overlay = (\n      <Menu>\n        <Menu.Item>\n          <Button type={\"link\"} onClick={onDelete}>\n            删除\n          </Button>\n        </Menu.Item>\n      </Menu>\n    );\n    return (\n      <Dropdown overlay={overlay}>\n        <Button type={\"link\"}>...</Button>\n      </Dropdown>\n    );\n  };\n\n  return (\n    <Container {...props} ref={ref}>\n      <Row justifyContent=\"space-between\">\n        <h3>{kanban.name}</h3>\n        <More kanban={kanban} />\n      </Row>\n\n      <TasksContainer>\n        <Drop droppableId={String(kanban.id)} type=\"ROW\" direction=\"vertical\">\n          <DropChild style={{ minHeight: \"1rem\" }}>\n            {tasks?.map((task, taskIndex) => (\n              <Drag\n                key={task.id}\n                draggableId={\"task\" + task.id}\n                index={taskIndex}\n              >\n                <div>\n                  <Card\n                    style={{ marginBottom: \"0.5rem\", cursor: \"pointer\" }}\n                    key={task.id}\n                    onClick={() => {\n                      startEdit(task.id);\n                    }}\n                  >\n                    <p>\n                      <Mark name={task.name} keyword={keyword} />\n                    </p>\n                    <TaskTypeIcon id={task.typeId} />\n                  </Card>\n                </div>\n              </Drag>\n            ))}\n          </DropChild>\n        </Drop>\n        <CreateTask kanbanId={kanban.id} />\n      </TasksContainer>\n    </Container>\n  );\n});\n\nexport const Container = styled.div`\n  min-width: 27rem;\n  border-radius: 6px;\n  background-color: rgb(244, 245, 247);\n  display: flex;\n  flex-direction: column;\n  padding: 0.7rem 0.7rem 1rem;\n  margin-right: 1.5rem;\n`;\n\nconst TasksContainer = styled.div`\n  overflow: scroll;\n  flex: 1;\n\n  ::-webkit-scrollbar {\n    display: none;\n  }\n`;\n"]},"metadata":{},"sourceType":"module"}